import{i as he,d as C,m as N,t as O,n as z,c as q,r as m,g as ve,a as G,b as A,e as ge,w as I,f as me,o as ne,h as K,j as U,k as u,l as _e,p as xe,q as X,I as oe,s as W,u as j,v as se,x as ye,y as be,z as le,A as J,B as Te,L as re,C as ie,D as we,E as Se,F as ke,G as Q,H as Y,J as k,K as H,M as pe,O as Pe,N as L,_ as ce,P as Le,Q as $e,R as Z,S as Ee,T as De,U as ee,V as Re,W as Be,X as R}from"./index-CpTrag1N.js";const ze=Symbol(),He=()=>he(ze,null),[Ie,$]=q("image"),Ce={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:z,height:z,radius:z,lazyLoad:Boolean,iconSize:z,showError:O,errorIcon:N("photo-fail"),iconPrefix:String,showLoading:O,loadingIcon:N("photo"),crossorigin:String,referrerpolicy:String};var Ve=C({name:Ie,props:Ce,emits:["load","error"],setup(e,{emit:v,slots:o}){const t=m(!1),i=m(!0),l=m(),{$Lazyload:c}=ve().proxy,s=G(()=>{const n={width:A(e.width),height:A(e.height)};return ge(e.radius)&&(n.overflow="hidden",n.borderRadius=A(e.radius)),n});I(()=>e.src,()=>{t.value=!1,i.value=!0});const d=n=>{i.value&&(i.value=!1,v("load",n))},g=()=>{const n=new Event("load");Object.defineProperty(n,"target",{value:l.value,enumerable:!0}),d(n)},_=n=>{t.value=!0,i.value=!1,v("error",n)},S=(n,b,T)=>T?T():u(oe,{name:n,size:e.iconSize,class:b,classPrefix:e.iconPrefix},null),w=()=>{if(i.value&&e.showLoading)return u("div",{class:$("loading")},[S(e.loadingIcon,$("loading-icon"),o.loading)]);if(t.value&&e.showError)return u("div",{class:$("error")},[S(e.errorIcon,$("error-icon"),o.error)])},p=()=>{if(t.value||!e.src)return;const n={alt:e.alt,class:$("img"),style:{objectFit:e.fit,objectPosition:e.position},crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy};return e.lazyLoad?_e(u("img",X({ref:l},n),null),[[xe("lazy"),e.src]]):u("img",X({ref:l,src:e.src,onLoad:d,onError:_},n),null)},f=({el:n})=>{const b=()=>{n===l.value&&i.value&&g()};l.value?b():U(b)},y=({el:n})=>{n===l.value&&!t.value&&_()};return c&&me&&(c.$on("loaded",f),c.$on("error",y),ne(()=>{c.$off("loaded",f),c.$off("error",y)})),K(()=>{U(()=>{var n;(n=l.value)!=null&&n.complete&&!e.lazyLoad&&g()})}),()=>{var n;return u("div",{class:$({round:e.round,block:e.block}),style:s.value},[p(),w(),(n=o.default)==null?void 0:n.call(o)])}}});const ue=W(Ve),[Me,E,je]=q("list"),Ue={error:Boolean,offset:j(300),loading:Boolean,disabled:Boolean,finished:Boolean,scroller:Object,errorText:String,direction:N("down"),loadingText:String,finishedText:String,immediateCheck:O};var Ae=C({name:Me,props:Ue,emits:["load","update:error","update:loading"],setup(e,{emit:v,slots:o}){const t=m(e.loading),i=m(),l=m(),c=He(),s=se(i),d=G(()=>e.scroller||s.value),g=()=>{U(()=>{if(t.value||e.finished||e.disabled||e.error||(c==null?void 0:c.value)===!1)return;const{direction:f}=e,y=+e.offset,n=J(d);if(!n.height||Te(i))return;let b=!1;const T=J(l);f==="up"?b=n.top-T.top<=y:b=T.bottom-n.bottom<=y,b&&(t.value=!0,v("update:loading",!0),v("load"))})},_=()=>{if(e.finished){const f=o.finished?o.finished():e.finishedText;if(f)return u("div",{class:E("finished-text")},[f])}},S=()=>{v("update:error",!1),g()},w=()=>{if(e.error){const f=o.error?o.error():e.errorText;if(f)return u("div",{role:"button",class:E("error-text"),tabindex:0,onClick:S},[f])}},p=()=>{if(t.value&&!e.finished&&!e.disabled)return u("div",{class:E("loading")},[o.loading?o.loading():u(re,{class:E("loading-icon")},{default:()=>[e.loadingText||je("loading")]})])};return I(()=>[e.loading,e.finished,e.error],g),c&&I(c,f=>{f&&g()}),ye(()=>{t.value=e.loading}),K(()=>{e.immediateCheck&&g()}),be({check:g}),le("scroll",g,{target:d,passive:!0}),()=>{var f;const y=(f=o.default)==null?void 0:f.call(o),n=u("div",{ref:l,class:E("placeholder")},null);return u("div",{ref:i,role:"feed",class:E(),"aria-busy":t.value},[e.direction==="down"?y:n,p(),_(),w(),e.direction==="up"?y:n])}}});const Fe=W(Ae),[Ne,B,Oe]=q("pull-refresh"),de=50,Ye=["pulling","loosing","success"],qe={disabled:Boolean,modelValue:Boolean,headHeight:j(de),successText:String,pullingText:String,loosingText:String,loadingText:String,pullDistance:z,successDuration:j(500),animationDuration:j(300)};var Ge=C({name:Ne,props:qe,emits:["change","refresh","update:modelValue"],setup(e,{emit:v,slots:o}){let t;const i=m(),l=m(),c=se(i),s=ie({status:"normal",distance:0,duration:0}),d=we(),g=()=>{if(e.headHeight!==de)return{height:`${e.headHeight}px`}},_=()=>s.status!=="loading"&&s.status!=="success"&&!e.disabled,S=a=>{const r=+(e.pullDistance||e.headHeight);return a>r&&(a<r*2?a=r+(a-r)/2:a=r*1.5+(a-r*2)/4),Math.round(a)},w=(a,r)=>{const x=+(e.pullDistance||e.headHeight);s.distance=a,r?s.status="loading":a===0?s.status="normal":a<x?s.status="pulling":s.status="loosing",v("change",{status:s.status,distance:a})},p=()=>{const{status:a}=s;return a==="normal"?"":e[`${a}Text`]||Oe(a)},f=()=>{const{status:a,distance:r}=s;if(o[a])return o[a]({distance:r});const x=[];return Ye.includes(a)&&x.push(u("div",{class:B("text")},[p()])),a==="loading"&&x.push(u(re,{class:B("loading")},{default:p})),x},y=()=>{s.status="success",setTimeout(()=>{w(0)},+e.successDuration)},n=a=>{t=Se(c.value)===0,t&&(s.duration=0,d.start(a))},b=a=>{_()&&n(a)},T=a=>{if(_()){t||n(a);const{deltaY:r}=d;d.move(a),t&&r.value>=0&&d.isVertical()&&(ke(a),w(S(r.value)))}},V=()=>{t&&d.deltaY.value&&_()&&(s.duration=+e.animationDuration,s.status==="loosing"?(w(+e.headHeight,!0),v("update:modelValue",!0),U(()=>v("refresh"))):w(0))};return I(()=>e.modelValue,a=>{s.duration=+e.animationDuration,a?w(+e.headHeight,!0):o.success||e.successText?y():w(0,!1)}),le("touchmove",T,{target:l}),()=>{var a;const r={transitionDuration:`${s.duration}ms`,transform:s.distance?`translate3d(0,${s.distance}px, 0)`:""};return u("div",{ref:i,class:B()},[u("div",{ref:l,class:B("track"),style:r,onTouchstartPassive:b,onTouchend:V,onTouchcancel:V},[u("div",{class:B("head"),style:g()},[f()]),(a=o.default)==null?void 0:a.call(o)])])}}});const Ke=W(Ge),We=["src"],Xe=C({__name:"Overlay",setup(e,{expose:v}){const o=m(!1),t=m({type:0,src:""});return I(o,l=>{l||(t.value={type:0,src:""})}),v({handleShow:(l,c)=>{o.value=!o.value,t.value.type=l,t.value.src=c}}),(l,c)=>{const s=ue,d=Pe;return L(),Q(d,{teleport:"#app",show:o.value,duration:0,onClick:c[1]||(c[1]=g=>o.value=!1)},{default:Y(()=>[k("div",{class:"px-4 w-full fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",onClick:c[0]||(c[0]=pe(()=>{},["stop"]))},[t.value.type===0?(L(),Q(s,{key:0,class:"w-full rounded-md",src:t.value.src,fit:"contain"},null,8,["src"])):(L(),H("video",{key:1,class:"w-full rounded-md",src:t.value.src,autoplay:"",controls:""},null,8,We))])]),_:1},8,["show"])}}}),Je=ce(Xe,[["__scopeId","data-v-c063b79b"]]);function te(e,v){return Math.floor(Math.random()*(v-e+1))+e}const ae=[170,200,230,260,290];function F(e=0,v="1"){let o=[];for(let t=0;t<10;t++){const i=e+t,l=te(0,ae.length-1),c=ae[l];let s=0,d="",g="",_="";v==="1"?(s=t%2,d="【新英雄预告】法术机关枪！符文法师瑞兹上线体验服~Faker×瑞兹联动表情包来了！"+i,g="英雄联盟"+i,_="用户昭昭"+i):(s=(t+1)%2,d="【新工具上线】蛋仔排队盲盒模拟器登场啦，快来体验领取吧"+i,g="蛋仔派对"+i,_="用户热带椰"+i);const S="https://picsum.photos/200/150?"+i+v;o.push({height:c,background:`hsl(${l*10}, 100%, 50%)`,type:s,src:s===0?S:["http://vjs.zencdn.net/v/oceans.mp4","https://media.w3.org/2010/05/sintel/trailer.mp4"][t%2],poster:S,title:d,about:g,username:_,zan:te(0,e+t)})}return o}const Qe={class:"home bg-white py-2"},Ze=["onClick"],et={class:"flex-1 relative overflow-hidden"},tt={key:0,class:"w-full h-full cursor-pointer bg-[rgba(0,0,0,0.3)] absolute top-0 left-0 bg-[url('@/assets/play.png')] bg-no-repeat bg-[length:4rem_4rem] bg-[center_center]"},at={class:"px-1 py-1 font-normal"},nt={class:"ellipsis-2 text-sm font-bold"},ot={class:"text-sm my-[4] text-[12px]"},st={class:"flex justify-between items-center text-[12px]"},lt={class:"flex items-center"},rt={class:"flex items-center"},it=C({__name:"Community",setup(e){const v=$e(),{symbol:o}=Le(v.query),t=m([]),i=ie([]),l=m([]);let c=6;const s=document.body.clientWidth,d=s/2/s*100,g=Math.floor(100/d),_=a=>{l.value=[];for(let r=0;r<a.length;r++){let x=a[r];if(r<g)i.push({...x,left:r*d,top:0}),l.value.push(x.height);else{let P=l.value[0],D=0;l.value.forEach((M,h)=>{P>M&&(P=M,D=h)}),i.push({...x,left:D%2===0?0:50,top:P+c}),l.value[D]=P+c+x.height}}},S=G(()=>l.value.length?Math.max.apply(Math,l.value):0),w=m(),p=(a,r)=>{var x;(x=w.value)==null||x.handleShow(a,r)},f=m(),y=m(!1),n=()=>{var a;(a=f.value)==null||a.$el.scrollTo({top:0,behavior:"smooth",duration:500}),setTimeout(()=>{Re("刷新成功"),y.value=!1,t.value=[],i.length=0,t.value=[...F(t.value.length,o.value)],_(t.value),t.value.length>=50?T.value=!0:T.value=!1},1500)},b=m(!1),T=m(!1),V=()=>{setTimeout(()=>{t.value=[...t.value,...F(t.value.length,o.value)],_(t.value),t.value.length>=40&&(T.value=!0),b.value=!1},1500)};return K(()=>{t.value=[...t.value,...F(t.value.length,o.value)],_(t.value),t.value.length>=50?T.value=!0:T.value=!1,Z.on("refresh",n)}),ne(()=>{Z.off("refresh",n)}),(a,r)=>{const x=ue,P=oe,D=Fe,M=Ke;return L(),H("div",Qe,[u(Je,{ref_key:"overlayRef",ref:w},null,512),u(M,{ref_key:"PullRefreshRef",ref:f,modelValue:y.value,"onUpdate:modelValue":r[1]||(r[1]=h=>y.value=h),onRefresh:n},{default:Y(()=>[u(D,{loading:b.value,"onUpdate:loading":r[0]||(r[0]=h=>b.value=h),finished:T.value,"finished-text":"没有更多了","loading-text":"加载中...",onLoad:V},{default:Y(()=>[k("div",{class:"wrap p-1 h-full",style:ee({height:S.value+"px"})},[(L(!0),H(Ee,null,De(i,(h,fe)=>(L(),H("div",{key:fe,class:"items rounded-md flex flex-col bg-white",style:ee({height:h.height+"px",left:h.left+"vw",top:h.top+"px"}),onClick:ct=>p(h.type,h.src)},[k("div",et,[u(x,{class:"w-full h-full",fit:"cover","lazy-load":"",src:h.type===0?h.src:h.poster},null,8,["src"]),h.type===1?(L(),H("div",tt)):Be("",!0)]),k("div",at,[k("div",nt,R(h.title),1),k("div",ot,R(h.about)+" --"+R(h.left),1),k("div",st,[k("div",lt,[u(P,{name:"contact",class:"mt-[2px] mr-1"}),k("div",null,R(h.username),1)]),k("div",rt,[u(P,{name:"good-job-o",class:"mt-[2px] mr-1"}),k("span",null,R(h.zan),1)])])])],12,Ze))),128))],4)]),_:1},8,["loading","finished"])]),_:1},8,["modelValue"])])}}}),dt=ce(it,[["__scopeId","data-v-89c21973"]]);export{dt as default};
